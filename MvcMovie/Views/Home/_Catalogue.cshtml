@model IEnumerable<VideoDetail>
@{
    ViewData["Title"] = "Video Catalogue";
}

<div class="catalogue-container">
    <h2>Uploaded Videos</h2>
    <table class="catalogue-table">
        <thead>
            <tr>
                <th>Filename</th>
                <th>Size (MB)</th>
            </tr>
        </thead>
        <tbody id="fileTable">
        @foreach (var file in Model)
        {
            <tr data-url="@file.Url">
                <td>@file.FileName</td>
                <td>@(Math.Round(file.FileSize / 1024d / 1024d, 2))</td>
            </tr>
        }
        </tbody>
    </table>

    <div id="playerContainer" class="video-player"></div>
</div>

@section Scripts {
<script>
const table = document.getElementById('fileTable');
const playerContainer = document.getElementById('playerContainer');

table.addEventListener('click', e => {
    const row = e.target.closest('tr');
    if (!row) return;

    const videoUrl = row.dataset.url;
    playerContainer.innerHTML = `
        <video controls width="640" height="360">
            <source src="${videoUrl}" type="video/mp4">
            Your browser does not support the video tag.
        </video>`;
});
</script>
}
